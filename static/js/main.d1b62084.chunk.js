(this["webpackJsonpham-system-app"]=this["webpackJsonpham-system-app"]||[]).push([[0],{423:function(e,t,n){},424:function(e,t,n){},657:function(e,t){},659:function(e,t){},670:function(e,t){},672:function(e,t){},699:function(e,t){},701:function(e,t){},702:function(e,t){},707:function(e,t){},709:function(e,t){},728:function(e,t){},740:function(e,t){},743:function(e,t){},785:function(e,t,n){},791:function(e,t,n){},792:function(e,t,n){},793:function(e,t,n){},794:function(e,t,n){},795:function(e,t,n){},796:function(e,t,n){},799:function(e,t,n){},894:function(e,t,n){},895:function(e,t,n){},896:function(e,t,n){},897:function(e,t,n){},899:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),s=n.n(c),r=n(73),i=n.n(r),o=(n(423),n(10)),l=n.n(o),u=n(17),j=n(6),d=(n(424),n(416)),b=n(15),h=n(9),O=n.n(h),m=n(91),x=n(125),p=function(){function e(t){Object(m.a)(this,e),this.id=t.id,this.fname=t.get("fname"),this.lname=t.get("lname"),this.email=t.get("fetchEmail"),this.building=t.get("building"),this.apartment=t.get("apartment"),this.isCommitteeMember=t.get("isCommitteeMember"),this.img=t.get("img")?t.get("img").url():null,this.community=t.get("community"),this.parseUser=t}return Object(x.a)(e,[{key:"getFullName",value:function(){return this.fname+" "+this.lname}}]),e}(),g=n(917),f=n(414);n(785);function v(e){var t=e.onLogIn,n=Object(c.useState)("yasmins"),s=Object(j.a)(n,2),r=s[0],i=s[1],o=Object(c.useState)("yasminsheffer21@gmail.com"),d=Object(j.a)(o,2),h=d[0],m=d[1],x=Object(c.useState)("123"),v=Object(j.a)(x,2),y=v[0],w=v[1],C=Object(c.useState)(!1),S=Object(j.a)(C,2),L=S[0],N=S[1];function k(){return(k=Object(u.a)(l.a.mark((function e(){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.User.logIn(h,y);case 3:n=e.sent,console.log("Logged in user",n),a=new p(n),console.log("community",a.community.id),t(a),N(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error while logging in user",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return L?Object(a.jsx)(b.a,{to:"/dashboards"}):Object(a.jsx)("div",{className:"p-login",children:Object(a.jsxs)(g.a,{children:[Object(a.jsx)("h2",{children:"Log-In to HAM"}),Object(a.jsxs)(g.a.Group,{controlId:"formBasicEmail",children:[Object(a.jsx)(g.a.Label,{children:"Email address"}),Object(a.jsx)(g.a.Control,{value:h,type:"email",placeholder:"Enter your email",onChange:function(e){return m(e.target.value)}}),Object(a.jsx)(g.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(a.jsxs)(g.a.Group,{controlId:"formBasicUserName",children:[Object(a.jsx)(g.a.Label,{children:"User name"}),Object(a.jsx)(g.a.Control,{value:r,type:"text",placeholder:"Enter your username",onChange:function(e){return i(e.target.value)}})]}),Object(a.jsxs)(g.a.Group,{controlId:"formBasicPassword",children:[Object(a.jsx)(g.a.Label,{children:"Password"}),Object(a.jsx)(g.a.Control,{value:y,type:"password",placeholder:"Password",onChange:function(e){return w(e.target.value)}})]}),Object(a.jsx)(f.a,{variant:"primary",type:"button",onClick:function(){return k.apply(this,arguments)},children:"Submit"})]})})}var y=n(904),w=n(905);n(791);function C(e){var t=e.onSignUp,n=Object(c.useState)(""),s=Object(j.a)(n,2),r=s[0],i=s[1],o=Object(c.useState)(""),d=Object(j.a)(o,2),h=d[0],m=d[1],x=Object(c.useState)(""),p=Object(j.a)(x,2),v=p[0],C=p[1],S=Object(c.useState)(null),L=Object(j.a)(S,2),N=L[0],k=L[1],U=Object(c.useState)(""),I=Object(j.a)(U,2),D=I[0],M=I[1],T=Object(c.useState)(""),B=Object(j.a)(T,2),E=B[0],H=B[1],F=Object(c.useState)(""),G=Object(j.a)(F,2),V=G[0],z=G[1],A=Object(c.useState)(""),R=Object(j.a)(A,2),P=R[0],q=R[1],Q=Object(c.useState)(""),K=Object(j.a)(Q,2),W=K[0],J=K[1],Y=Object(c.useState)(""),Z=Object(j.a)(Y,2),_=Z[0],X=Z[1],$=Object(c.useState)(!1),ee=Object(j.a)($,2),te=ee[0],ne=ee[1];function ae(){return(ae=Object(u.a)(l.a.mark((function e(){var n,a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=O.a.Object.extend("Community"),(a=new n).set("address",{city:V,street:P}),e.next=6,a.save();case 6:c=e.sent,console.log("Community created",c),(s=new O.a.User).set("username",v),s.set("email",D),s.set("fname",r),s.set("lname",h),s.set("apartment",_),s.set("isCommitteeMember",!0),s.set("img",new O.a.File(N.name,N)),s.set("community",c),s.set("building",W),s.set("password",E),s.signUp().then((function(e){console.log("User signed up",e)})).catch((function(e){console.error("Error while signing up user",e)})),t(s),ne(!0),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),console.error("Error while creating Community: ",e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})))).apply(this,arguments)}if(te)return Object(a.jsx)(b.a,{to:"/"});var ce=N?URL.createObjectURL(N):"";return Object(a.jsx)("div",{className:"p-signup",children:Object(a.jsxs)(g.a,{children:[Object(a.jsx)("h2",{children:"Create a Committee Member Account"}),Object(a.jsxs)(g.a.Group,{controlId:"formBasicUserFirstName",children:[Object(a.jsx)(g.a.Label,{children:"First name"}),Object(a.jsx)(g.a.Control,{value:r,type:"text",placeholder:"Enter your first name",onChange:function(e){return i(e.target.value)}})]}),Object(a.jsxs)(g.a.Group,{controlId:"formBasicUserLastName",children:[Object(a.jsx)(g.a.Label,{children:"Last name"}),Object(a.jsx)(g.a.Control,{value:h,type:"text",placeholder:"Enter your last name",onChange:function(e){return m(e.target.value)}})]}),Object(a.jsxs)(g.a.Group,{controlId:"formBasicUserLastName",children:[Object(a.jsx)(g.a.Label,{children:"User name"}),Object(a.jsx)(g.a.Control,{value:v,type:"text",placeholder:"Select your user name",onChange:function(e){return C(e.target.value)}})]}),Object(a.jsxs)(g.a.Group,{controlId:"formBasicEmail",children:[Object(a.jsx)(g.a.Label,{children:"Email address"}),Object(a.jsx)(g.a.Control,{value:D,type:"email",placeholder:"Enter your email",onChange:function(e){return M(e.target.value)}}),Object(a.jsx)(g.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(a.jsxs)(g.a.Group,{controlId:"formBasicPassword",children:[Object(a.jsx)(g.a.Label,{children:"Password"}),Object(a.jsx)(g.a.Control,{value:E,type:"password",placeholder:"Password",onChange:function(e){return H(e.target.value)}})]}),Object(a.jsxs)(g.a.Group,{controlId:"formBasicUserCity",children:[Object(a.jsx)(g.a.Label,{children:"City"}),Object(a.jsx)(g.a.Control,{value:V,type:"text",placeholder:"Enter city name",onChange:function(e){return z(e.target.value)}})]}),Object(a.jsxs)(g.a.Group,{controlId:"formBasicUserLastName",children:[Object(a.jsx)(g.a.Label,{children:"Street"}),Object(a.jsx)(g.a.Control,{value:P,type:"text",placeholder:"Enter street name",onChange:function(e){return q(e.target.value)}})]}),Object(a.jsxs)(g.a.Group,{controlId:"formBasicUserLastName",children:[Object(a.jsx)(g.a.Label,{children:"Building"}),Object(a.jsx)(g.a.Control,{value:W,type:"text",placeholder:"Enter building number",onChange:function(e){return J(e.target.value)}})]}),Object(a.jsxs)(g.a.Group,{controlId:"formBasicUserLastName",children:[Object(a.jsx)(g.a.Label,{children:"Apartment"}),Object(a.jsx)(g.a.Control,{value:_,type:"text",placeholder:"Enter apartment number",onChange:function(e){return X(e.target.value)}})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalImage",children:[Object(a.jsx)(g.a.Label,{children:"Img"}),Object(a.jsx)(g.a.Control,{type:"file",placeholder:"Select profile img",accept:"image/*",onChange:function(e){1===e.target.files.length?k(e.target.files[0]):k(null)}})]}),Object(a.jsx)(w.a,{src:ce,className:"img-preview"}),Object(a.jsx)(f.a,{variant:"primary",type:"button",onClick:function(){return ae.apply(this,arguments)},children:"Submit"})]})})}var S=n(906),L=n(919),N=n(920),k=n(918);n(792);function U(e){var t=e.activeUser,n=e.onLogOut;return Object(a.jsx)("div",{className:"c-nav",children:Object(a.jsxs)(N.a,{expand:"md",children:[Object(a.jsx)(N.a.Brand,{href:"#/",children:"HAM System"}),Object(a.jsx)(N.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsxs)(N.a.Collapse,{id:"basic-navbar-nav",children:[Object(a.jsxs)(k.a,{className:"mr-auto",children:[t?Object(a.jsx)(k.a.Link,{href:"#/",children:"Home"}):null,t?Object(a.jsx)(k.a.Link,{href:"#/dashboards",children:"Dashboards"}):null,t?Object(a.jsx)(k.a.Link,{href:"#/tenants",children:"Tenants"}):null,t?Object(a.jsx)(k.a.Link,{href:"#/messages",children:"Messages"}):null,t?Object(a.jsx)(k.a.Link,{href:"#/votings",children:"Votings"}):null,t?Object(a.jsx)(k.a.Link,{href:"#/issues",children:"Issues"}):null]}),Object(a.jsxs)(k.a,{className:"ml-auto",children:[t?null:Object(a.jsx)(k.a.Link,{href:"#/login",children:"LogIn"}),t?null:Object(a.jsx)(k.a.Link,{href:"#/signup",children:"SignUp"}),t?Object(a.jsx)(k.a.Link,{href:"#",onClick:function(){return n()},children:"LogOut"}):null]})]})]})})}n(793);function I(e){var t=e.activeUser,n=e.onLogOut;return Object(a.jsxs)("div",{className:"p-hp",children:[Object(a.jsx)(U,{activeUser:t,onLogOut:n}),Object(a.jsx)("div",{children:Object(a.jsxs)(S.a,{children:[Object(a.jsx)(y.a,{className:"justify-content-lg-center",children:Object(a.jsx)("h1",{children:"Homeowner Association Management System"})}),Object(a.jsx)(y.a,{children:Object(a.jsxs)(L.a,{children:[Object(a.jsxs)(L.a.Item,{children:[Object(a.jsx)("img",{className:"d-block img-set mx-auto",src:"https://www.gethow.org/wp-content/uploads/2019/08/property-manager.jpg",alt:"First slide"}),Object(a.jsxs)(L.a.Caption,{children:[Object(a.jsx)("h3",{children:"Manage your committee"}),Object(a.jsx)("p",{children:"With this app you will find it very easy to manage your committee"})]})]}),Object(a.jsxs)(L.a.Item,{children:[Object(a.jsx)("img",{className:"d-block img-set mx-auto",src:"https://images.idgesg.net/images/article/2018/01/group-of-people-applauding_agreement_community-100746938-large.jpg",alt:"Third slide"}),Object(a.jsxs)(L.a.Caption,{children:[Object(a.jsx)("h3",{children:"Improve your performance"}),Object(a.jsx)("p",{children:"This app will help you improve your performance"})]})]}),Object(a.jsxs)(L.a.Item,{children:[Object(a.jsx)("img",{className:"d-block img-set mx-auto",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTqXbDmRJkcFQWqNf-cBaynQC-2sNF6mKcDag&usqp=CAU",alt:"Third slide"}),Object(a.jsxs)(L.a.Caption,{children:[Object(a.jsx)("h3",{children:"Happy tenants"}),Object(a.jsx)("p",{children:"Useing this app will lead to much happyer tenants"})]})]})]})})]})})]})}n(794);var D=function(e){var t=e.activeUser,n=e.onLogOut;return t?Object(a.jsxs)("div",{className:"p-issues",children:[Object(a.jsx)(U,{activeUser:t,onLogOut:n}),"issues - TBD"]}):Object(a.jsx)(b.a,{to:"/"})},M=n(413),T=n(910),B=n(417),E=(n(795),n(922)),H=n(921),F=n(797),G=n(412),V=(n(796),function e(t){Object(m.a)(this,e),this.id=t.id,this.createdAt=t.get("createdAt"),this.description=t.get("description"),this.user=t.get("user"),this.parseComment=t}),z=n(907),A=n(908),R=n(909),P=n(916);var q=function(e){var t=e.show,n=e.handleClose,s=e.updateMessage,r=e.id,i=e.currentTitle,o=e.currentDetails,l=e.currentPriority,u=e.currentImg,d=Object(c.useState)(""),b=Object(j.a)(d,2),h=b[0],O=b[1],m=Object(c.useState)(""),x=Object(j.a)(m,2),p=x[0],v=x[1],C=Object(c.useState)(null),S=Object(j.a)(C,2),L=S[0],N=S[1],k=Object(c.useState)(null),U=Object(j.a)(k,2),I=U[0],D=U[1];function T(){O(""),v(""),N(null),D(null),n()}var B=I?URL.createObjectURL(I):"";return Object(a.jsxs)(P.a,{show:t,onHide:T,size:"xl",className:"c-new-message-modal",children:[Object(a.jsx)(P.a.Header,{closeButton:!0,children:Object(a.jsx)(P.a.Title,{children:"Update Message"})}),Object(a.jsxs)(P.a.Body,{children:[Object(a.jsxs)(g.a,{children:[Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalName",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:2,children:"Message Title"}),Object(a.jsx)(M.a,{sm:10,children:Object(a.jsx)(g.a.Control,{type:"text",placeholder:i,value:h,onChange:function(e){return O(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalDesc",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:2,children:"Message Details"}),Object(a.jsx)(M.a,{sm:10,children:Object(a.jsx)(g.a.Control,{type:"text",placeholder:o,value:p,onChange:function(e){return v(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalDesc",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:2,children:"Message Priority"}),Object(a.jsx)(M.a,{sm:10,children:Object(a.jsx)(g.a.Control,{type:"text",placeholder:l,value:L,onChange:function(e){return N(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalImage",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:2,children:"Message Image"}),Object(a.jsx)(M.a,{sm:10,children:Object(a.jsx)(g.a.Control,{type:"file",accept:"image/*",onChange:function(e){1===e.target.files.length?D(e.target.files[0]):D(null)}})})]})]}),Object(a.jsx)(w.a,{src:B,className:"img-preview"})]}),Object(a.jsxs)(P.a.Footer,{children:[Object(a.jsx)(f.a,{variant:"secondary",onClick:T,children:"Cancel"}),Object(a.jsx)(f.a,{variant:"primary",onClick:function(){var e=h||i,t=p||o,n=L||l,a=I||u;console.log("update",e,t,n,a),s(r,e,t,n,a),T()},children:"Update Message"})]})]})};var Q=function(e){var t=e.messages,n=e.activeUser,s=e.users,r=e.deleteMessage,i=e.updateMessageFromModal,o=Object(c.useState)(null),d=Object(j.a)(o,2),h=d[0],m=d[1],x=Object(c.useState)([]),p=Object(j.a)(x,2),g=p[0],v=p[1],y=Object(c.useState)(!1),w=Object(j.a)(y,2),C=w[0],S=w[1],L=Object(c.useState)(""),N=Object(j.a)(L,2),k=N[0],U=N[1],I=Object(c.useState)(!0),D=Object(j.a)(I,2),M=D[0],T=D[1];if(Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(n){var a,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=O.a.Object.extend("Comment"),(c=new O.a.Query(a)).equalTo("msg",t[h].parseMsg),e.next=5,c.find();case 5:s=e.sent,v(s.map((function(e){return new V(e)}))),T(!1),console.log("comments arr",g);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}null!==h&&function(t){e.apply(this,arguments)}()}),[h]),!n)return Object(a.jsx)(b.a,{to:"/"});function B(){return(B=Object(u.a)(l.a.mark((function e(n,a){var c,s,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=O.a.Object.extend("message"),s=new O.a.Query(c),e.prev=2,console.log("here",t),console.log("here2",a),e.next=7,s.get(t[a].id);case 7:return(r=e.sent).set("readBy",n),e.prev=9,e.next=12,r.save();case 12:i=e.sent,console.log("Updated message",i),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),console.error("Error while updating message",e.t0);case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(2),console.log("Error while updating message",e.t1);case 24:case"end":return e.stop()}}),e,null,[[2,21],[9,16]])})))).apply(this,arguments)}function P(e){T(!0),m(e),Q(e)?console.log("was read",t[e].readBy):(console.log("wasn't read",t[e].readBy),t[e].readBy.push(n.id),function(e,t){B.apply(this,arguments)}(t[e].readBy,e))}function Q(e){return!!t[e].readBy.includes(n.id)}function K(){return W.apply(this,arguments)}function W(){return(W=Object(u.a)(l.a.mark((function e(){var n,a,c,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.a.Object.extend("message"),a=new O.a.Query(n),c=O.a.Object.extend("Comment"),s=new c,e.next=6,a.get(t[h].id);case 6:r=e.sent,s.set("description",k),s.set("user",O.a.User.current()),s.set("msg",r),s.save().then((function(e){console.log("Comment created",e),v(g.concat(new V(e))),T(!1)}),(function(e){console.error("Error while creating Comment: ",e)})),U("");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=g.map((function(e){var t=s.find((function(t){return t.id===e.user.id}));return Object(a.jsxs)("div",{className:"comments-data",children:[Object(a.jsxs)("div",{children:[t.img?Object(a.jsx)("img",{src:t.img}):Object(a.jsx)(z.a,{})," ",t.getFullName(),":"]}),Object(a.jsx)("div",{children:e.description}),console.log("comment user",e.parseComment)]},e.id)})),Y=t.map((function(e,n){return Object(a.jsxs)(E.a,{children:[Object(a.jsx)(H.a.Toggle,{as:E.a.Header,eventKey:""+n,onClick:function(e){return P(n)},children:Object(a.jsxs)("div",{className:"header-acc",children:[Object(a.jsxs)("div",{children:[Q(n)?null:Object(a.jsx)(A.a,{}),e.title]}),Object(a.jsx)("div",{children:e.getIcon()})]})}),Object(a.jsx)(H.a.Collapse,{eventKey:""+n,children:Object(a.jsx)(E.a.Body,{children:Object(a.jsxs)("div",{className:"msg-comments-view",children:[Object(a.jsxs)("div",{className:"msg-data",children:[e.img?Object(a.jsx)("img",{src:e.img}):Object(a.jsx)(R.a,{}),Object(a.jsxs)("p",{children:["Details: ",e.details]}),Object(a.jsxs)("p",{children:["Priority: ",e.priority]})]}),Object(a.jsxs)("div",{className:"comments",children:[Object(a.jsx)("p",{children:"Comments:"}),Object(a.jsx)("div",{children:M?"loading...":J}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"msg-btm",children:Object(a.jsxs)(F.a,{className:"mb-3",children:[Object(a.jsx)(G.a,{value:k,onChange:function(e){return U(e.target.value)},type:"text",placeholder:"Add comment"}),Object(a.jsx)(F.a.Append,{children:Object(a.jsx)(f.a,{onClick:K,variant:"outline-secondary",children:"Add"})})]})}),Object(a.jsxs)("div",{className:"msg-btm",children:[Object(a.jsx)(f.a,{onClick:function(){return S(!0)},children:"Update"}),Object(a.jsx)(f.a,{onClick:function(t){return r(e.id)},children:"Delete"})]})]})]})]})})})]},t.indexOf(e))}));return Object(a.jsxs)("div",{className:"c-msg-view",children:[Object(a.jsx)(H.a,{defaultActiveKey:h,children:Y}),null!==h&&t&&h<t.length?Object(a.jsx)(q,{show:C,handleClose:function(){return S(!1)},updateMessage:i,id:t[h].id,currentTitle:t[h].title,currentDetails:t[h].details,currentPriority:t[h].priority,currentImg:t[h].img}):null]})};var K=function(e){var t=e.show,n=e.handleClose,s=e.addMessage,r=Object(c.useState)(""),i=Object(j.a)(r,2),o=i[0],l=i[1],u=Object(c.useState)(""),d=Object(j.a)(u,2),b=d[0],h=d[1],O=Object(c.useState)("Info"),m=Object(j.a)(O,2),x=m[0],p=m[1],v=Object(c.useState)(""),C=Object(j.a)(v,2),S=C[0],L=C[1];function N(){l(""),h(""),p(null),L(null),n()}var k=S?URL.createObjectURL(S):"";return Object(a.jsxs)(P.a,{show:t,onHide:N,size:"xl",className:"c-new-message-modal",children:[Object(a.jsx)(P.a.Header,{closeButton:!0,children:Object(a.jsx)(P.a.Title,{children:"New Message"})}),Object(a.jsxs)(P.a.Body,{children:[Object(a.jsxs)(g.a,{children:[Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalName",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:2,children:"Message Title"}),Object(a.jsx)(M.a,{sm:10,children:Object(a.jsx)(g.a.Control,{type:"text",placeholder:"Message Title",value:o,onChange:function(e){return l(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalDesc",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:2,children:"Message Details"}),Object(a.jsx)(M.a,{sm:10,children:Object(a.jsx)(g.a.Control,{type:"text",placeholder:"Message Details",value:b,onChange:function(e){return h(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalDesc",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:2,children:"Priority"}),Object(a.jsx)(M.a,{sm:10,children:Object(a.jsx)(g.a.Control,{type:"text",placeholder:"Message Priority",value:x,onChange:function(e){return p(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalImage",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:2,children:"Message Image"}),Object(a.jsx)(M.a,{sm:10,children:Object(a.jsx)(g.a.Control,{type:"file",accept:"image/*",onChange:function(e){1===e.target.files.length?L(e.target.files[0]):L(null)}})})]})]}),Object(a.jsx)(w.a,{src:k,className:"img-preview"})]}),Object(a.jsxs)(P.a.Footer,{children:[Object(a.jsx)(f.a,{variant:"secondary",onClick:N,children:"Cancel"}),Object(a.jsx)(f.a,{variant:"primary",onClick:function(){s(o,b,x,S),N()},children:"Create Message"})]})]})};var W=function(e){var t=e.activeUser,n=e.users,s=e.messages,r=e.addMessage,i=e.updateMessage,o=e.deleteMessage,l=e.onLogOut,u=Object(c.useState)(""),d=Object(j.a)(u,2),b=d[0],h=d[1],O=Object(c.useState)(null),m=Object(j.a)(O,2),x=m[0],p=m[1],v=Object(c.useState)("createdAt"),w=Object(j.a)(v,2),C=w[0],L=w[1],N=Object(c.useState)(!1),k=Object(j.a)(N,2),I=k[0],D=k[1],E=s.filter((function(e){return(e.title.includes(b)||e.details.includes(b))&&(!x||e.priority===x)}));return E.sort((function(e,t){return e[C]>t[C]?1:e[C]<t[C]?-1:0})),Object(a.jsxs)("div",{className:"p-messages",children:[Object(a.jsx)(U,{activeUser:t,onLogOut:l}),Object(a.jsx)("div",{className:"filters",children:Object(a.jsxs)(S.a,{children:[Object(a.jsxs)(y.a,{children:[Object(a.jsx)(M.a,{lg:6,md:12,sm:12,children:Object(a.jsx)(g.a,{children:Object(a.jsx)(g.a.Group,{controlId:"formBasicSearch",children:Object(a.jsx)(g.a.Control,{value:b,type:"text",placeholder:"Filter by text in Title and Details",onChange:function(e){return h(e.target.value)}})})})}),Object(a.jsx)(M.a,{lg:3,md:6,sm:12,children:Object(a.jsxs)(T.a,{className:"filter-btn",value:x,id:"dropdown-basic-button",title:"Filter by Priority: "+x,onSelect:function(e){return p(e)},children:[Object(a.jsx)(B.a.Item,{eventKey:"Info",href:"#",children:"Info"}),Object(a.jsx)(B.a.Item,{eventKey:"Important",href:"#",children:"Important"})]})}),Object(a.jsx)(M.a,{lg:3,md:6,sm:12,children:Object(a.jsx)(g.a,{children:Object(a.jsxs)(g.a.Group,{value:C,as:y.a,onChange:function(e){return L(e.target.value)},children:[Object(a.jsx)(g.a.Label,{column:!0,as:"legend",sm:5,children:"Sort By:"}),Object(a.jsx)(g.a.Check,{value:"createdAt",type:"radio",label:"Date",name:"formHorizontalRadios",id:"formHorizontalRadios1",className:"sort-by"}),Object(a.jsx)(g.a.Check,{value:"priority",type:"radio",label:"Priority",name:"formHorizontalRadios",id:"formHorizontalRadios2",className:"sort-by"})]})})})]}),Object(a.jsx)(y.a,{children:Object(a.jsx)(M.a,{className:"new-msg-btn",children:Object(a.jsx)(f.a,{variant:"link",onClick:function(){return D(!0)},children:"New Message"})})})]})}),Object(a.jsx)(S.a,{children:Object(a.jsx)(Q,{messages:E,activeUser:t,users:n,deleteMessage:o,updateMessageFromModal:i})}),Object(a.jsx)(K,{show:I,handleClose:function(){return D(!1)},addMessage:r})]})},J=n(911),Y=n(912);var Z=function(e){var t=e.show,n=e.handleClose,s=e.addVoting,r=Object(c.useState)(""),i=Object(j.a)(r,2),o=i[0],l=i[1],u=Object(c.useState)(""),d=Object(j.a)(u,2),b=d[0],h=d[1],O=Object(c.useState)(new Date),m=Object(j.a)(O,2),x=m[0],p=m[1],v=Object(c.useState)([]),w=Object(j.a)(v,2),C=w[0],S=w[1],L=Object(c.useState)(""),N=Object(j.a)(L,2),k=N[0],U=N[1];function I(){l(""),h(""),p(null),S([]),n()}return Object(a.jsxs)(P.a,{show:t,onHide:I,size:"xl",className:"c-new-voting-modal",children:[Object(a.jsx)(P.a.Header,{closeButton:!0,children:Object(a.jsx)(P.a.Title,{children:"New Voting"})}),Object(a.jsx)(P.a.Body,{children:Object(a.jsxs)(g.a,{children:[Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalName",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:2,children:"Title"}),Object(a.jsx)(M.a,{sm:10,children:Object(a.jsx)(g.a.Control,{type:"text",placeholder:"Voting Title",required:!0,value:o,onChange:function(e){return l(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalDesc",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:2,children:"Details"}),Object(a.jsx)(M.a,{sm:10,children:Object(a.jsx)(g.a.Control,{type:"text",placeholder:"Voting Details",required:!0,value:b,onChange:function(e){return h(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalDesc",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:2,children:"End Date"}),Object(a.jsx)(M.a,{sm:10,children:Object(a.jsx)(g.a.Control,{type:"date",placeholder:"Voting End Date",required:!0,value:x,onChange:function(e){return p(e.target.value)}})})]}),Object(a.jsx)(g.a.Label,{column:!0,sm:2,children:"Options"}),C.map((function(e,t){return Object(a.jsxs)(F.a,{as:y.a,controlId:"inputHorizontalOption",children:[Object(a.jsx)(G.a,{type:"text",placeholder:e,required:!0}),Object(a.jsx)(F.a.Append,{children:Object(a.jsx)(f.a,{variant:"outline-secondary",onClick:function(t){return function(e,t){console.log("eee",t,e.target.value)}(t,e)},children:Object(a.jsx)(J.a,{})})})]},t)})),Object(a.jsxs)(F.a,{className:"sm-3",children:[Object(a.jsx)(F.a.Prepend,{children:Object(a.jsx)(f.a,{variant:"outline-secondary",onClick:function(){return S(C.concat(k))},children:Object(a.jsx)(Y.a,{})})}),Object(a.jsx)(G.a,{value:k,"aria-describedby":"basic-addon1",placeholder:"Add option",onChange:function(e){return U(e.target.value)}})]})]})}),Object(a.jsxs)(P.a.Footer,{children:[Object(a.jsx)(f.a,{variant:"secondary",onClick:I,children:"Cancel"}),Object(a.jsx)(f.a,{variant:"primary",onClick:function(){s(o,b,x,C),I()},children:"Create Voting"})]})]})},_=(n(799),n(163)),X=n(415);var $=function(e){var t=e.voting,n=e.users,c=e.isResData;e.activeUser,console.log("chart",t);var s=[],r=[];if(n&&(r=n.filter((function(e){return!1===e.isCommitteeMember}))),t&&c){for(var i=0;i<t.options.length;i++)s[i]=0;var o,l=Object(_.a)(t.results);try{for(l.s();!(o=l.n()).done;){var u=o.value;s[t.options.indexOf(u.vote)]++}}catch(j){l.e(j)}finally{l.f()}console.log("data",s)}return r&&t&&!c&&(console.log("length",n,r,r.length,t.results.length),s[0]=t.results.length,s[1]=r.length-t.results.length),Object(a.jsx)("div",{children:t&&(c&&t.results.length>0||!c)?Object(a.jsx)(X.Pie,{data:function(){return console.log("calculating chart data",t.options),console.log(t.results),{labels:c?t.options:["Voted","Not Voted"],datasets:[{label:"# of Recipes",data:s,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)"],borderWidth:1}]}}}):Object(a.jsx)("p",{children:"No Data"})})};var ee=function(e){var t=e.show,n=e.handleClose,s=(e.updateVoting,e.voting),r=Object(c.useState)(""),i=Object(j.a)(r,2),o=i[0],l=i[1];function u(){l(""),n()}return s&&s.endDate,Object(a.jsxs)(P.a,{show:t,onHide:n,children:[Object(a.jsx)(P.a.Header,{closeButton:!0,children:Object(a.jsx)(P.a.Title,{children:"Change the end date"})}),Object(a.jsxs)(P.a.Body,{children:[console.log("index voting",s),"Current End Date:",s?s.endDate.toLocaleDateString():null,Object(a.jsx)(g.a,{children:Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalDesc",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:6,children:"New End Date"}),Object(a.jsx)(M.a,{sm:6,children:Object(a.jsx)(g.a.Control,{type:"date",placeholder:"New End Date",value:o,onChange:function(e){return l(e.target.value)}})})]})})]}),Object(a.jsx)(P.a.Footer,{children:Object(a.jsx)(f.a,{variant:"secondary",onClick:u,children:"Close"})})]})};var te=function(e){var t=e.isActive,n=e.votings,s=e.activeUser,r=(e.updateVotingFromModal,e.updateSelectedVote),i=e.users,o=Object(c.useState)(null),d=Object(j.a)(o,2),b=d[0],h=d[1],O=Object(c.useState)(!1),m=Object(j.a)(O,2),x=m[0],p=m[1],g=Object(c.useState)(null),v=Object(j.a)(g,2),y=v[0],w=(v[1],Object(c.useState)(null)),C=Object(j.a)(w,2),S=C[0];function L(){return(L=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("update!",y),console.log("index",t),p(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}C[1];var N=n.map((function(e,n){return Object(a.jsxs)(E.a,{children:[Object(a.jsx)(H.a.Toggle,{as:E.a.Header,eventKey:""+n,onClick:function(e){return h(n)},children:Object(a.jsxs)("div",{className:"header-acc",children:[Object(a.jsx)("div",{children:e.title}),t?null:Object(a.jsxs)("div",{children:["Result: ",e.getFinalResult()]})]})}),Object(a.jsx)(H.a.Collapse,{eventKey:""+n,children:Object(a.jsx)(E.a.Body,{children:Object(a.jsxs)("div",{className:"voting-comments-view",children:[Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:["Details: ",e.details]}),Object(a.jsx)("p",{children:"Your vote:"}),"options",Object(a.jsx)(T.a,{id:"dropdown-variants-Info",variant:"info",title:"Your Vote",value:S,children:e.options.map((function(t){return Object(a.jsx)(B.a.Item,{value:t,onClick:function(){return function(e,t){console.log("item",e,t),r(e,t)}(t,e)},children:t})}))}),Object(a.jsx)(f.a,{variant:"light",children:"Submit"}),t?Object(a.jsxs)("div",{children:["Voting Precentage",Object(a.jsx)($,{voting:e,users:i,isResData:!1,activeUser:s})]}):Object(a.jsxs)("div",{className:"charts",children:[Object(a.jsxs)("div",{children:["Voting Precentage",Object(a.jsx)($,{voting:e,users:i,isResData:!1,activeUser:s})]}),Object(a.jsxs)("div",{children:["Voting Results",Object(a.jsx)($,{voting:e,users:i,isResData:!0,activeUser:s})]})]})]}),Object(a.jsxs)("div",{className:"end-date-section",children:[Object(a.jsxs)("p",{children:["End Date: ",e.endDate.toLocaleDateString()]}),t?Object(a.jsx)("div",{className:"voting-btm",children:Object(a.jsx)(f.a,{onClick:function(){return p(!0)},children:"Update End Date"})}):null]})]})})})]},n)}));return Object(a.jsxs)("div",{className:"c-voting-view",children:[Object(a.jsx)(H.a,{defaultActiveKey:b,children:N}),Object(a.jsx)(ee,{show:x,handleClose:function(){return p(!1)},updateVoting:function(e){return L.apply(this,arguments)},voting:n[b]})]})};n(894);var ne=function(e){var t=e.activeUser,n=e.votings,s=e.addVoting,r=e.updateVoting,i=e.updateSelectedVote,o=e.onLogOut,l=e.users,u=Object(c.useState)([]),d=Object(j.a)(u,2),h=d[0],O=d[1],m=Object(c.useState)([]),x=Object(j.a)(m,2),p=x[0],v=x[1],w=Object(c.useState)(""),C=Object(j.a)(w,2),L=C[0],N=C[1],k=Object(c.useState)(!1),I=Object(j.a)(k,2),D=I[0],T=I[1];if(Object(c.useEffect)((function(){if(!t)return Object(a.jsx)(b.a,{to:"/"});O(n.filter((function(e){return e.endDate>=new Date}))),v(n.filter((function(e){return e.endDate<new Date})))}),[n]),!t)return Object(a.jsx)(b.a,{to:"/"});var B=p.filter((function(e){return e.title.includes(L)||e.details.includes(L)})),E=t.isCommitteeMember?h:h.filter((function(e){return-1===e.results.map((function(e){return e.user})).indexOf(t.id)}));return Object(a.jsx)("div",{className:"p-votings",children:Object(a.jsxs)("div",{children:[Object(a.jsx)(U,{activeUser:t,onLogOut:o}),Object(a.jsx)("div",{children:Object(a.jsxs)(S.a,{className:"votings-cols",children:[Object(a.jsxs)(M.a,{children:[Object(a.jsx)(y.a,{children:Object(a.jsx)("h3",{children:"Active Votings"})}),Object(a.jsx)(y.a,{children:Object(a.jsx)(M.a,{className:"new-voting-btn",children:Object(a.jsx)(f.a,{variant:"link",onClick:function(){return T(!0)},children:"New Voting"})})}),Object(a.jsx)(y.a,{className:"accor-size",sm:12,children:Object(a.jsx)(te,{isActive:!0,votings:E,activeUser:t,updateVotingFromModal:r,updateSelectedVote:i})})]}),Object(a.jsxs)(M.a,{children:[Object(a.jsx)(y.a,{children:Object(a.jsx)("h3",{children:"Votings Results"})}),Object(a.jsx)(y.a,{children:Object(a.jsx)(M.a,{className:"search-size",children:Object(a.jsx)(g.a,{children:Object(a.jsx)(g.a.Group,{controlId:"formBasicSearch",children:Object(a.jsx)(g.a.Control,{value:L,type:"text",placeholder:"Filter by text in Title and Details",onChange:function(e){return N(e.target.value)}})})})})}),Object(a.jsx)(y.a,{className:"accor-size",sm:12,children:Object(a.jsx)(te,{isActive:!1,votings:B,activeUser:t,updateVotingFromModal:r,updateSelectedVote:i,users:l})})]})]})}),Object(a.jsx)(S.a,{}),Object(a.jsx)(Z,{show:D,handleClose:function(){return T(!1)},addVoting:s})]})})};n(895);var ae=function(e){var t=e.show,n=e.handleClose,s=e.addTenant,r=Object(c.useState)(""),i=Object(j.a)(r,2),o=i[0],l=i[1],u=Object(c.useState)(""),d=Object(j.a)(u,2),b=d[0],h=d[1],O=Object(c.useState)(""),m=Object(j.a)(O,2),x=m[0],p=m[1],v=Object(c.useState)(""),C=Object(j.a)(v,2),S=C[0],L=C[1],N=Object(c.useState)(""),k=Object(j.a)(N,2),U=k[0],I=k[1],D=Object(c.useState)(""),T=Object(j.a)(D,2),B=T[0],E=T[1];function H(){l(""),h(""),p(""),L(""),I(""),E(null),n()}var F=B?URL.createObjectURL(B):"";return Object(a.jsxs)(P.a,{show:t,onHide:H,size:"xl",className:"c-new-message-modal",children:[Object(a.jsx)(P.a.Header,{closeButton:!0,children:Object(a.jsx)(P.a.Title,{children:"New Tenant"})}),Object(a.jsxs)(P.a.Body,{children:[Object(a.jsxs)(g.a,{children:[Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalName",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:3,children:"First Name"}),Object(a.jsx)(M.a,{sm:9,children:Object(a.jsx)(g.a.Control,{type:"text",placeholder:"First Name",value:o,onChange:function(e){return l(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalDesc",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:3,children:"Last Name"}),Object(a.jsx)(M.a,{sm:9,children:Object(a.jsx)(g.a.Control,{type:"text",placeholder:"Last Name",value:b,onChange:function(e){return h(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalDesc",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:3,children:"Email"}),Object(a.jsx)(M.a,{sm:9,children:Object(a.jsx)(g.a.Control,{type:"email",placeholder:"Email Address",value:x,onChange:function(e){return p(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalDesc",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:3,children:"Building"}),Object(a.jsx)(M.a,{sm:9,children:Object(a.jsx)(g.a.Control,{type:"text",placeholder:"Building",value:S,onChange:function(e){return L(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalDesc",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:3,children:"Apartment"}),Object(a.jsx)(M.a,{sm:9,children:Object(a.jsx)(g.a.Control,{type:"text",placeholder:"Apartment",value:U,onChange:function(e){return I(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalImage",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:3,children:"Image"}),Object(a.jsx)(M.a,{sm:9,children:Object(a.jsx)(g.a.Control,{type:"file",accept:"image/*",onChange:function(e){1===e.target.files.length?E(e.target.files[0]):E(null)}})})]})]}),Object(a.jsx)(w.a,{src:F,className:"img-preview"})]}),Object(a.jsxs)(P.a.Footer,{children:[Object(a.jsx)(f.a,{variant:"secondary",onClick:H,children:"Cancel"}),Object(a.jsx)(f.a,{variant:"primary",onClick:function(){s(o,b,x,S,U,B),H()},children:"Create Tenant"})]})]})};n(896);var ce=function(e){var t=e.show,n=e.handleClose,s=e.updateTenant,r=e.id,i=e.currentFname,o=e.currentLname,l=e.currentEmail,u=e.currentBuilding,d=e.currentApartment,b=e.currentImg,h=Object(c.useState)(""),O=Object(j.a)(h,2),m=O[0],x=O[1],p=Object(c.useState)(""),v=Object(j.a)(p,2),C=v[0],S=v[1],L=Object(c.useState)(""),N=Object(j.a)(L,2),k=N[0],U=N[1],I=Object(c.useState)(""),D=Object(j.a)(I,2),T=D[0],B=D[1],E=Object(c.useState)(""),H=Object(j.a)(E,2),F=H[0],G=H[1],V=Object(c.useState)(""),z=Object(j.a)(V,2),A=z[0],R=z[1];function q(){x(""),S(""),U(""),B(""),G(""),R(null),n()}var Q=A?URL.createObjectURL(A):"";return Object(a.jsxs)(P.a,{show:t,onHide:q,size:"xl",className:"c-new-message-modal",children:[Object(a.jsx)(P.a.Header,{closeButton:!0,children:Object(a.jsx)(P.a.Title,{children:"Update Tenant's Info"})}),Object(a.jsxs)(P.a.Body,{children:[Object(a.jsxs)(g.a,{children:[Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalName",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:3,children:"First Name"}),Object(a.jsx)(M.a,{sm:9,children:Object(a.jsx)(g.a.Control,{type:"text",placeholder:i,value:m,onChange:function(e){return x(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalDesc",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:3,children:"Last Name"}),Object(a.jsx)(M.a,{sm:9,children:Object(a.jsx)(g.a.Control,{type:"text",placeholder:o,value:C,onChange:function(e){return S(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalDesc",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:3,children:"Email"}),Object(a.jsx)(M.a,{sm:9,children:Object(a.jsx)(g.a.Control,{type:"email",placeholder:l,value:k,onChange:function(e){return U(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalDesc",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:3,children:"Building"}),Object(a.jsx)(M.a,{sm:9,children:Object(a.jsx)(g.a.Control,{type:"text",placeholder:u,value:T,onChange:function(e){return B(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalDesc",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:3,children:"Apartment"}),Object(a.jsx)(M.a,{sm:9,children:Object(a.jsx)(g.a.Control,{type:"text",placeholder:d,value:F,onChange:function(e){return G(e.target.value)}})})]}),Object(a.jsxs)(g.a.Group,{as:y.a,controlId:"formHorizontalImage",children:[Object(a.jsx)(g.a.Label,{column:!0,sm:3,children:"Image"}),Object(a.jsx)(M.a,{sm:9,children:Object(a.jsx)(g.a.Control,{type:"file",accept:"image/*",onChange:function(e){1===e.target.files.length?R(e.target.files[0]):R(null)}})})]})]}),Object(a.jsx)(w.a,{src:Q,className:"img-preview"})]}),Object(a.jsxs)(P.a.Footer,{children:[Object(a.jsx)(f.a,{variant:"secondary",onClick:q,children:"Cancel"}),Object(a.jsx)(f.a,{variant:"primary",onClick:function(){var e=m||i,t=C||o,n=k||l,a=T||u,c=F||d,j=A||b;console.log("update",e,t,n,a,c,j),s(r,e,t,n,a,c,j),q()},children:"Update Tenant"})]})]})};var se=function(e){var t=e.tenants,n=(e.activeUser,e.deleteTenant),s=e.updateTenantsInfoFromModal,r=Object(c.useState)(!1),i=Object(j.a)(r,2),o=i[0],l=i[1],u=Object(c.useState)(null),d=Object(j.a)(u,2),b=d[0],h=d[1],O=t.map((function(e,c){return Object(a.jsxs)(E.a,{children:[console.log("tenents",t),console.log("tenent[index]",t[c]),console.log("selectedTenant",b),Object(a.jsx)(H.a.Toggle,{as:E.a.Header,eventKey:""+c,onClick:function(e){return h(parseInt(c))},children:Object(a.jsxs)("div",{className:"header-acc",children:[e.fname," ",e.lname]})}),Object(a.jsx)(H.a.Collapse,{eventKey:""+c,children:Object(a.jsx)(E.a.Body,{children:Object(a.jsxs)("div",{className:"tenant-body",children:[Object(a.jsx)("div",{children:Object(a.jsx)("img",{src:e.img})}),Object(a.jsxs)("div",{className:"tenant-info",children:[Object(a.jsxs)("p",{children:["Name: ",e.fname," ",e.lname]}),Object(a.jsxs)("p",{children:["Email: ",e.email]}),Object(a.jsxs)("p",{children:["Building: ",e.building]}),Object(a.jsxs)("p",{children:["Apt: ",e.apartment]})]}),Object(a.jsx)("div",{children:Object(a.jsxs)("div",{className:"edit-btm",children:[Object(a.jsx)(f.a,{onClick:function(){return l(!0)},children:"Update"}),Object(a.jsx)(f.a,{onClick:function(t){return n(e.id,c)},children:"Delete"})]})})]})})}),console.log("tenent[selectedTenant]",t[b]),null!==b?Object(a.jsx)(ce,{show:o,handleClose:function(){return l(!1)},updateTenant:s,id:t[b].id,currentFname:t[b].fname,currentLname:t[b].lname,currentEmail:t[b].email,currentBuilding:t[b].building,currentApartment:t[b].apartment,currentImg:t[b].img}):null]},c)}));return console.log("tenants",t),Object(a.jsx)("div",{className:"c-tenant-view",children:Object(a.jsx)(H.a,{defaultActiveKey:b,children:O})})};var re=function(e){var t=e.activeUser,n=e.onLogOut,s=Object(c.useState)([]),r=Object(j.a)(s,2),i=r[0],o=r[1],d=Object(c.useState)(""),h=Object(j.a)(d,2),m=h[0],x=h[1],v=Object(c.useState)(!1),w=Object(j.a)(v,2),C=w[0],L=w[1];if(Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.a.Object.extend("User"),a=new O.a.Query(n),new O.a.Object.extend("Community").id=t.community,console.log("active user",t),a.equalTo("community",t.community),a.equalTo("isCommitteeMember",!1),a.equalTo("deleted",!1),e.next=10,a.find();case 10:c=e.sent,o(c.map((function(e){return new p(e)}))),console.log("tenants arr",c);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&function(){e.apply(this,arguments)}()}),[t]),!t)return Object(a.jsx)(b.a,{to:"/"});function N(){return(N=Object(u.a)(l.a.mark((function e(n,a,c,s,r,u){var j,d,b,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j=O.a.Object.extend("User"),d=new j,(b=new O.a.ACL).setPublicWriteAccess(!0),b.setPublicReadAccess(!0),d.setACL(b),d.set("fname",n),d.set("lname",a),d.set("username",n+a),d.set("email",c),d.set("fetchEmail",c),d.set("password","123"),d.set("building",s),d.set("apartment",r),d.set("img",new O.a.File(u.name,u)),d.set("community",t.parseUser.get("community")),d.set("isCommitteeMember",!1),e.prev=17,e.next=20,d.save();case 20:h=e.sent,o(i.concat(new p(h))),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(17),console.log("error",e.t0);case 27:case"end":return e.stop()}}),e,null,[[17,24]])})))).apply(this,arguments)}function k(){return(k=Object(u.a)(l.a.mark((function e(t,n,a,c,s,r,u){var j,d,b,h,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j=new O.a.User,d=new O.a.Query(j),e.next=4,d.get(t);case 4:return(b=e.sent).set("fname",n),b.set("lname",a),b.set("email",c),b.set("fetchEmail",c),b.set("building",s),b.set("apartment",r),b.set("img",new O.a.File(u.name,u)),e.prev=12,e.next=15,b.save();case 15:h=e.sent,console.log("Updated user",h),m=i.filter((function(e){return e.id!==t})),o(m.concat(new p(h))),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(12),console.error("Error while updating user",e.t0);case 24:case"end":return e.stop()}}),e,null,[[12,21]])})))).apply(this,arguments)}function I(){return(I=Object(u.a)(l.a.mark((function e(t){var n,a,c,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new O.a.User,a=new O.a.Query(n),e.next=4,a.get(t);case 4:return(c=e.sent).set("deleted",!0),e.prev=6,e.next=9,c.save();case 9:s=e.sent,console.log("Deleted user",s),r=i.filter((function(e){return e.id!==t})),o(r),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),console.error("Error while updating user",e.t0);case 18:case"end":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}var D=i.filter((function(e){return e.fname.includes(m)||e.lname.includes(m)}));return Object(a.jsxs)("div",{className:"p-tenants",children:[Object(a.jsx)(U,{activeUser:t,onLogOut:n}),Object(a.jsx)("div",{className:"filters",children:Object(a.jsxs)(S.a,{children:[Object(a.jsx)(y.a,{children:Object(a.jsx)(M.a,{lg:12,children:Object(a.jsx)(g.a,{children:Object(a.jsx)(g.a.Group,{controlId:"formBasicSearch",children:Object(a.jsx)(g.a.Control,{value:m,type:"text",placeholder:"Filter by text in Title and Details",onChange:function(e){return x(e.target.value)}})})})})}),Object(a.jsx)(y.a,{children:Object(a.jsx)(M.a,{className:"new-msg-btn",children:Object(a.jsx)(f.a,{variant:"link",onClick:function(){return L(!0)},children:"New Tenant"})})})]})}),Object(a.jsx)(S.a,{children:Object(a.jsx)(se,{tenants:D,activeUser:t,deleteTenant:function(e){return I.apply(this,arguments)},updateTenantsInfoFromModal:function(e,t,n,a,c,s,r){return k.apply(this,arguments)}})}),Object(a.jsx)(ae,{show:C,handleClose:function(){return L(!1)},addTenant:function(e,t,n,a,c,s){return N.apply(this,arguments)}})]})},ie=(n(897),n(913)),oe=n(914),le=function(){function e(t){Object(m.a)(this,e),this.id=t.id,this.createdAt=t.get("createdAt"),this.title=t.get("title"),this.details=t.get("details"),this.priority=t.get("priorityName"),this.img=t.get("img")?t.get("img").url():null,this.readBy=t.get("readBy"),this.parseMsg=t}return Object(x.a)(e,[{key:"getIcon",value:function(){return"Info"===this.priority?Object(a.jsx)(ie.a,{}):Object(a.jsx)(oe.a,{})}}]),e}(),ue=function(){function e(t){Object(m.a)(this,e),this.id=t.id,this.title=t.get("title"),this.details=t.get("details"),this.options=t.get("options"),this.results=t.get("results"),this.endDate=t.get("endDate"),this.community=t.get("community"),this.parseVotingObj=t}return Object(x.a)(e,[{key:"getFinalResult",value:function(){for(var e=[],t=0;t<this.options.length;t++)e[t]=0;var n,a=Object(_.a)(this.results);try{for(a.s();!(n=a.n()).done;){var c=n.value;e[this.options.indexOf(c.vote)]++}}catch(s){a.e(s)}finally{a.f()}return console.log("max",e),this.options[e.indexOf(Math.max.apply(Math,e))]}},{key:"getOptionsItems",value:function(){var e,t=[],n=Object(_.a)(this.options);try{for(n.s();!(e=n.n()).done;){var c=e.value;t.push(Object(a.jsx)(B.a.Item,{value:c,children:c}))}}catch(s){n.e(s)}finally{n.f()}return console.log("options",this.options),console.log("optionsArr",t),t}}]),e}(),je=n(915);var de=function(e){var t=e.activeUser,n=e.onLogOut,s=Object(c.useState)([]),r=Object(j.a)(s,2),i=r[0],o=r[1],d=Object(c.useState)([]),h=Object(j.a)(d,2),m=h[0],x=h[1],p=Object(c.useState)([]),g=Object(j.a)(p,2),f=g[0],v=g[1];return Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.a.Object.extend("message"),a=new O.a.Query(n),console.log("active user",t),a.equalTo("community",t.community),a.notEqualTo("readBy",t.id),e.prev=5,e.next=8,a.find();case 8:c=e.sent,o(c.map((function(e){return new le(e)}))),console.log("messages arr",c),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.log("error while fetching messages",e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}function n(){return(n=Object(u.a)(l.a.mark((function e(){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.a.Object.extend("Voting"),(a=new O.a.Query(n)).equalTo("community",t.community),e.next=5,a.find();case 5:c=e.sent,x(c.filter((function(e){return e.get("endDate")>=new Date&&e.get("results").filter((function(e){return-1===Object.values(e).indexOf(t)}))})).map((function(e){return new ue(e)}))),v(c.filter((function(e){return e.get("endDate")<new Date})).map((function(e){return new ue(e)}))),console.log("Voting found",c),console.log("active",m),console.log("finished",f);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t&&(function(){e.apply(this,arguments)}(),function(){n.apply(this,arguments)}())}),[t]),t?Object(a.jsxs)("div",{className:"p-dashboards",children:[Object(a.jsx)(U,{activeUser:t,onLogOut:n}),Object(a.jsxs)(S.a,{children:[Object(a.jsxs)(y.a,{children:[Object(a.jsxs)(M.a,{children:[Object(a.jsxs)("p",{children:["New Messages ",i.length]}),i.length>0?Object(a.jsx)(Q,{messages:i,activeUser:t,deleteMessage:null,updateMessageFromModal:null}):Object(a.jsxs)("p",{children:["There are no new messages ",Object(a.jsx)(je.a,{})]})]}),Object(a.jsxs)(M.a,{children:[Object(a.jsxs)("p",{children:["Pending Votings ",m.length]}),m.length>0?Object(a.jsx)(te,{isActive:!0,votings:m,activeUser:t,updateVotingFromModal:null}):Object(a.jsxs)("p",{children:["There are no pending votings ",Object(a.jsx)(je.a,{})]})]})]}),Object(a.jsxs)(y.a,{children:[Object(a.jsxs)(M.a,{children:[Object(a.jsx)("p",{children:"Voting Results"}),f.length>0?Object(a.jsx)(te,{isActive:!1,votings:f,activeUser:t,updateVotingFromModal:null}):Object(a.jsxs)("p",{children:["There are no votings results ",Object(a.jsx)(je.a,{})]})]}),Object(a.jsxs)(M.a,{children:[Object(a.jsx)("p",{children:"New Issues"}),"There are no new issues ",Object(a.jsx)(je.a,{})]})]})]})]}):Object(a.jsx)(b.a,{to:"/"})};var be=function(){var e=Object(c.useState)(O.a.User.current()?new p(O.a.User.current()):null),t=Object(j.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(!1),i=Object(j.a)(r,2),o=(i[0],i[1]),h=Object(c.useState)([]),m=Object(j.a)(h,2),x=m[0],g=m[1],f=Object(c.useState)([]),y=Object(j.a)(f,2),w=y[0],S=y[1],L=Object(c.useState)([]),N=Object(j.a)(L,2),k=N[0],U=N[1];function M(e){s(null),O.a.User.logOut(),o(!0)}function T(){return(T=Object(u.a)(l.a.mark((function e(t,a,c,s){var r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=O.a.Object.extend("message"),(i=new r).set("title",t),i.set("details",a),i.set("priorityName",c),i.set("img",new O.a.File(s.name,s)),i.set("createdBy",O.a.User.current()),i.set("readBy",[n.id]),i.set("community",n.community),e.prev=9,e.next=12,i.save();case 12:o=e.sent,console.log("Success! add message: ",o),S(w.concat(new le(o))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(9),console.log("Error! add message",e.t0);case 20:case"end":return e.stop()}}),e,null,[[9,17]])})))).apply(this,arguments)}function B(){return(B=Object(u.a)(l.a.mark((function e(t,n,a,c,s){var r,i,o,u,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=O.a.Object.extend("message"),i=new O.a.Query(r),e.next=4,i.get(t);case 4:return(o=e.sent).set("title",n),o.set("details",a),o.set("priorityName",c),o.set("img",new O.a.File(s.name,s)),e.prev=9,e.next=12,o.save();case 12:u=e.sent,console.log("Success! updated message",u),j=w.filter((function(e){return e.id!==t})),S(j.concat(new le(u))),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(9),console.log("Error! update message",e.t0);case 21:case"end":return e.stop()}}),e,null,[[9,18]])})))).apply(this,arguments)}function E(){return(E=Object(u.a)(l.a.mark((function e(t){var n,a,c,s,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.a.Object.extend("message"),a=new O.a.Query(n),e.next=4,a.get(t);case 4:return c=e.sent,e.prev=5,e.next=8,c.destroy();case 8:s=e.sent,console.log("Success! deleted message",s),r=w.filter((function(e){return e.id!==t})),S(r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),console.log("Error! delete message",e.t0);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}function H(){return(H=Object(u.a)(l.a.mark((function e(t,a,c,s){var r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=O.a.Object.extend("Voting"),(i=new r).set("title",t),i.set("details",a),i.set("options",s),i.set("endDate",new Date(c)),i.set("community",n.parseUser.get("community")),i.set("results",[]),e.prev=8,e.next=11,i.save();case 11:o=e.sent,console.log("Success! add voting",o),U(k.concat(new ue(o))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),console.log("Error! add voting",e.t0);case 19:case"end":return e.stop()}}),e,null,[[8,16]])})))).apply(this,arguments)}function F(){return(F=Object(u.a)(l.a.mark((function e(t,n){var a,c,s,r,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=O.a.Object.extend("Voting"),c=new O.a.Query(a),e.next=4,c.get(n.id);case 4:return(s=e.sent).set("endDate",new Date(t)),e.prev=6,e.next=9,s.save();case 9:r=e.sent,console.log("Success! updated voting end date",r),i=k.filter((function(e){return e.id!==n.id})),U(i.concat(new ue(r))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),console.log("Error! update voting end date",e.t0);case 18:case"end":return e.stop()}}),e,null,[[6,15]])})))).apply(this,arguments)}function G(){return(G=Object(u.a)(l.a.mark((function e(t,a){var c,s,r,i,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=O.a.Object.extend("Voting"),s=new O.a.Query(c),e.next=4,s.get(a.id);case 4:return r=e.sent,i=a.results.concat({user:n.id,vote:t}),console.log("voting.results",a.results),console.log("results",i),r.set("results",i),e.prev=9,e.next=12,r.save();case 12:o=e.sent,console.log("Success! updated voting results",o),u=k.filter((function(e){return e.id!==a.id})),U(u.concat(new ue(o))),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(9),console.log("Error! update voting results",e.t0);case 21:case"end":return e.stop()}}),e,null,[[9,18]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.a.Object.extend("User"),a=new O.a.Query(t),new O.a.Object.extend("Community").id=n.community,a.equalTo("community",n.community),e.prev=5,e.next=8,a.find();case 8:c=e.sent,g(c.map((function(e){return new p(e)}))),console.log("Success! users arr",x),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.log("Error! users arr",e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})))).apply(this,arguments)}function t(){return(t=Object(u.a)(l.a.mark((function e(){var t,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.a.Object.extend("message"),a=new O.a.Query(t),console.log("active user",n),a.equalTo("community",n.community),e.prev=4,e.next=7,a.find();case 7:c=e.sent,S(c.map((function(e){return new le(e)}))),console.log("Success! messages arr: ",c),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log("Error! messages arr",e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})))).apply(this,arguments)}function a(){return(a=Object(u.a)(l.a.mark((function e(){var t,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.a.Object.extend("Voting"),(a=new O.a.Query(t)).equalTo("community",n.community),e.prev=3,e.next=6,a.find();case 6:c=e.sent,U(c.map((function(e){return new ue(e)}))),console.log("Success! users arr",k),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("Error! votings arr",e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}n&&(console.log("active user",n),function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}(),function(){a.apply(this,arguments)}())}),[n]),Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(d.a,{children:Object(a.jsxs)(b.d,{children:[Object(a.jsx)(b.b,{exact:!0,path:"/",children:Object(a.jsx)(I,{activeUser:n,onLogOut:M})}),Object(a.jsx)(b.b,{exact:!0,path:"/dashboards",children:Object(a.jsx)(de,{activeUser:n,onLogOut:M})}),Object(a.jsx)(b.b,{exact:!0,path:"/tenants",children:Object(a.jsx)(re,{activeUser:n,onLogOut:M})}),Object(a.jsx)(b.b,{exact:!0,path:"/messages",children:Object(a.jsx)(W,{activeUser:n,users:x,messages:w,addMessage:function(e,t,n,a){return T.apply(this,arguments)},updateMessage:function(e,t,n,a,c){return B.apply(this,arguments)},deleteMessage:function(e){return E.apply(this,arguments)},onLogOut:M})}),Object(a.jsx)(b.b,{exact:!0,path:"/votings",children:Object(a.jsx)(ne,{activeUser:n,votings:k,addVoting:function(e,t,n,a){return H.apply(this,arguments)},updateVoting:function(e,t){return F.apply(this,arguments)},updateSelectedVote:function(e,t){return G.apply(this,arguments)},onLogOut:M,users:x})}),Object(a.jsx)(b.b,{exact:!0,path:"/issues",children:Object(a.jsx)(D,{activeUser:n,onLogOut:M})}),Object(a.jsx)(b.b,{exact:!0,path:"/login",children:Object(a.jsx)(v,{onLogIn:function(e){s(e),o(!1)}})}),Object(a.jsx)(b.b,{exact:!0,path:"/signup",children:Object(a.jsx)(C,{onSignUp:function(e){s(e),o(!1)}})})]})})})},he=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,923)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};n(898);O.a.serverURL="https://parseapi.back4app.com",O.a.initialize("51WTBPdplru4mxpDvag4nrEUfNZgUyfxbIgCy7ax","OBjrtMi5wsuIwzeW09gsZoP9FFclzAoGUU9bhTaW"),i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(be,{})}),document.getElementById("root")),he()}},[[899,1,2]]]);
//# sourceMappingURL=main.d1b62084.chunk.js.map